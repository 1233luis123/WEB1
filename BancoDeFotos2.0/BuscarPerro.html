
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscar Mascota - Mascotas Perdidas</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="EstiloBancoFotosPerrosPerdidos.css" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container">
            <a class="navbar-brand" href="InicioBancoFotos.html">
                <i class="fas fa-heart"></i> Mascotas Perdidas
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="InicioBancoFotos.html">
                            <i class="fas fa-home"></i> Inicio
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="ReportesP.html">
                            <i class="fas fa-plus-circle"></i> Reportar Perdida
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="BuscarPerro.html">
                            <i class="fas fa-search"></i> Buscar Mascota
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="galeria.html">
                            <i class="fas fa-images"></i> Galería
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="adopcion.html">
                            <i class="fas fa-paw"></i> Adopción
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="contacto.html">
                            <i class="fas fa-envelope"></i> Contacto
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Reportar Avistamiento -->
    <section class="py-5 bg-info text-white mt-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h3><i class="fas fa-exclamation-circle"></i> ¿Viste una Mascota Perdida?</h3>
                    <p class="mb-0">Si has visto una mascota que crees que puede estar perdida, ayúdanos a reunirla con su familia.</p>
                </div>
                <div class="col-lg-4 text-end">
                    <a href="ReportesP.html" class="btn btn-warning btn-lg">
                        <i class="fas fa-camera"></i> Reportar Avistamiento
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Header -->
    <section class="bg-primary text-white py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="display-4 fw-bold mb-4">
                        <i class="fas fa-search"></i> Buscar Mascota
                    </h1>
                    <p class="lead">
                        Utiliza nuestros filtros de búsqueda para encontrar mascotas perdidas o encontradas 
                        que coincidan con las características que estás buscando.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Búsqueda Rápida -->
    <section class="py-4 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-md-8 mx-auto">
                    <div class="input-group input-group-lg">
                        <input type="text" class="form-control" placeholder="Búsqueda rápida: nombre, raza, ubicación..." 
                               id="quickSearch">
                        <button class="btn btn-primary" type="button" id="quickSearchBtn">
                            <i class="fas fa-search"></i> Buscar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Filtros de Búsqueda -->
    <section class="py-5">
        <div class="container">
            <div class="search-container">
                <h3 class="text-primary mb-4">
                    <i class="fas fa-filter"></i> Filtros de Búsqueda Avanzada
                </h3>
                <form id="searchForm">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label for="searchEspecie" class="form-label">Especie</label>
                            <select class="form-select" id="searchEspecie" name="especie">
                                <option value="">Todas</option>
                                <option value="Perro">Perro</option>
                                <option value="Gato">Gato</option>
                                <option value="Otro">Otro</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label for="searchRaza" class="form-label">Raza</label>
                            <input type="text" class="form-control" id="searchRaza" name="raza" placeholder="Ej: Golden, Mestizo">
                        </div>
                        <div class="col-md-3">
                            <label for="searchColor" class="form-label">Color</label>
                            <input type="text" class="form-control" id="searchColor" name="color" placeholder="Ej: Dorado, Negro">
                        </div>
                        <div class="col-md-3">
                            <label for="searchSexo" class="form-label">Sexo</label>
                            <select class="form-select" id="searchSexo" name="sexo">
                                <option value="">Todos</option>
                                <option value="Macho">Macho</option>
                                <option value="Hembra">Hembra</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label for="searchUbicacion" class="form-label">Ubicación</label>
                            <input type="text" class="form-control" id="searchUbicacion" name="ubicacion" placeholder="Distrito, referencia...">
                        </div>
                        <div class="col-md-3">
                            <label for="searchFechaDesde" class="form-label">Desde Fecha</label>
                            <input type="date" class="form-control" id="searchFechaDesde" name="fechaDesde">
                        </div>
                        <div class="col-md-3">
                            <label for="searchFechaHasta" class="form-label">Hasta Fecha</label>
                            <input type="date" class="form-control" id="searchFechaHasta" name="fechaHasta">
                        </div>
                        <div class="col-12 text-center">
                            <button type="submit" class="btn btn-primary btn-lg me-3">
                                <i class="fas fa-search"></i> Buscar
                            </button>
                            <button type="button" class="btn btn-secondary btn-lg" id="clearFilters">
                                <i class="fas fa-times"></i> Limpiar Filtros
                            </button>
                        </div>
                    </div>
                </form>

                <!-- Filtros Rápidos -->
                <div class="filter-chips mt-3">
                    <button class="filter-chip active" onclick="filterByStatus('todos')">Todas</button>
                    <button class="filter-chip" onclick="filterByStatus('perdido')">Perdidas</button>
                    <button class="filter-chip" onclick="filterByStatus('encontrado')">Encontradas</button>
                    <button class="filter-chip" onclick="filterByLocation('Miraflores')">Miraflores</button>
                    <button class="filter-chip" onclick="filterByLocation('San Borja')">San Borja</button>
                    <button class="filter-chip" onclick="filterByLocation('Surco')">Surco</button>
                    <button class="filter-chip" onclick="filterBySpecies('Perro')">Perros</button>
                    <button class="filter-chip" onclick="filterBySpecies('Gato')">Gatos</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Resultados de Búsqueda -->
    <section class="py-5">
        <div class="container">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h3 class="text-primary mb-0">
                    <i class="fas fa-list"></i> Resultados de Búsqueda
                </h3>
                <div class="d-flex align-items-center gap-3">
                    <span class="text-muted" id="resultCount">Mostrando todas las mascotas</span>
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-sort"></i> Ordenar
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#" onclick="sortResults('fecha-desc')">Más Recientes</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortResults('fecha-asc')">Más Antiguos</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortResults('nombre')">Por Nombre</a></li>
                            <li><a class="dropdown-item" href="#" onclick="sortResults('ubicacion')">Por Ubicación</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row" id="searchResults">
                <!-- Los resultados se cargan aquí dinámicamente -->
            </div>
        </div>
    </section>

    <!-- Mapa -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-4">
                    <h3 class="text-primary">
                        <i class="fas fa-map-marked-alt"></i> Mapa de Ubicaciones
                    </h3>
                    <p class="text-muted">Visualiza las ubicaciones donde se han reportado mascotas perdidas</p>
                </div>
                <div class="col-12">
                    <div class="map-container bg-secondary d-flex align-items-center justify-content-center">
                        <div class="text-center text-white">
                            <i class="fas fa-map fa-4x mb-3"></i>
                            <h4>Mapa Interactivo</h4>
                            <p>Aquí se mostraría un mapa con las ubicaciones de las mascotas reportadas</p>
                            <button class="btn btn-light">
                                <i class="fas fa-expand-arrows-alt"></i> Ver Mapa Completo
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Tips -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="display-6 fw-bold">Tips para una Búsqueda Efectiva</h2>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-md-6 col-lg-3 text-center">
                    <i class="fas fa-eye fa-3x text-primary mb-3"></i>
                    <h5>Observa Detenidamente</h5>
                    <p>Revisa cuidadosamente las fotos y descripción. A veces las mascotas cambian de apariencia.</p>
                </div>
                <div class="col-md-6 col-lg-3 text-center">
                    <i class="fas fa-clock fa-3x text-success mb-3"></i>
                    <h5>Busca por Fechas</h5>
                    <p>Usa los filtros de fecha para encontrar reportes recientes o del período específico.</p>
                </div>
                <div class="col-md-6 col-lg-3 text-center">
                    <i class="fas fa-map-marker-alt fa-3x text-warning mb-3"></i>
                    <h5>Amplía la Zona</h5>
                    <p>Las mascotas pueden alejarse. Busca también en distritos cercanos.</p>
                </div>
                <div class="col-md-6 col-lg-3 text-center">
                    <i class="fas fa-phone fa-3x text-info mb-3"></i>
                    <h5>Contacta Inmediatamente</h5>
                    <p>Si encuentras una mascota similar, contacta de inmediato al reportante.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-light py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-4">
                    <h5><i class="fas fa-heart"></i> Mascotas Perdidas</h5>
                    <p>Conectando corazones, reuniendo familias. Una plataforma dedicada a ayudar a encontrar mascotas perdidas.</p>
                </div>
                <div class="col-lg-2 mb-4">
                    <h6>Enlaces</h6>
                    <ul class="list-unstyled">
                        <li><a href="InicioBancoFotos.html" class="text-light-emphasis">Inicio</a></li>
                        <li><a href="ReportesP.html" class="text-light-emphasis">Reportar</a></li>
                        <li><a href="BuscarPerro.html" class="text-light-emphasis">Buscar</a></li>
                        <li><a href="galeria.html" class="text-light-emphasis">Galería</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 mb-4">
                    <h6>Ayuda</h6>
                    <ul class="list-unstyled">
                        <li><a href="contacto.html" class="text-light-emphasis">Contacto</a></li>
                        <li><a href="#" class="text-light-emphasis">FAQ</a></li>
                        <li><a href="#" class="text-light-emphasis">Términos</a></li>
                        <li><a href="#" class="text-light-emphasis">Privacidad</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 mb-4">
                    <h6>Síguenos</h6>
                    <div class="d-flex gap-3">
                        <a href="#" class="text-light fs-4"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="text-light fs-4"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-light fs-4"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-light fs-4"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
            <hr>
            <div class="text-center">
                <p>&copy; 2024 Mascotas Perdidas. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Botón Volver Arriba -->
    <button id="backToTop" class="btn btn-primary position-fixed" style="bottom: 20px; right: 20px; display: none; z-index: 1000;" onclick="scrollToTop()">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="FuncionesPagina.js"></script>
   <script>
        // Funciones específicas para la página de búsqueda
        function filterByStatus(status, event) {
            updateFilterChips(event.target);
            if (status === 'todos') {
                displayAllPets();
            } else {
                const filteredPets = filterPetsByStatus(status);
                displaySearchResults(filteredPets);
            }
        }

        function filterByLocation(location, event) {
            updateFilterChips(event.target);
            const filteredPets = filterPetsByLocation(location);
            displaySearchResults(filteredPets);
        }

        function filterBySpecies(species, event) {
            updateFilterChips(event.target);
            const filteredPets = filterPetsBySpecies(species);
            displaySearchResults(filteredPets);
        }

        function filterPetsByStatus(status) {
            const allPets = [...mascotasData.perdidas, ...mascotasData.encontradas];
            return allPets.filter(pet => pet.estado.toLowerCase() === status.toLowerCase());
        }

        function filterPetsByLocation(location) {
            const allPets = [...mascotasData.perdidas, ...mascotasData.encontradas];
            return allPets.filter(pet => pet.ubicacion.toLowerCase().includes(location.toLowerCase()));
        }

        function filterPetsBySpecies(species) {
            const allPets = [...mascotasData.perdidas, ...mascotasData.encontradas];
            return allPets.filter(pet => pet.especie.toLowerCase() === species.toLowerCase());
        }

        function displayAllPets() {
            const allPets = [...mascotasData.perdidas, ...mascotasData.encontradas];
            displaySearchResults(allPets);
        }

        function updateFilterChips(activeChip) {
            document.querySelectorAll('.filter-chip').forEach(chip => {
                chip.classList.remove('active');
            });
            activeChip.classList.add('active');
        }

        function sortResults(sortBy) {
            const container = document.getElementById('searchResults');
            const petCards = Array.from(container.children);

            // Aquí implementarías la lógica de ordenamiento
            console.log('Ordenando por:', sortBy);
        }

        // Limpiar filtros
        document.getElementById('clearFilters').addEventListener('click', function() {
            document.getElementById('searchForm').reset();
            document.getElementById('quickSearch').value = '';
            displayAllPets();
            updateResultCount(mascotasData.perdidas.length + mascotasData.encontradas.length);
        });

        // Búsqueda rápida
        document.getElementById('quickSearchBtn').addEventListener('click', function() {
            const searchTerm = document.getElementById('quickSearch').value.toLowerCase();
            if (searchTerm.trim() === '') {
                displayAllPets();
                return;
            }

            const allPets = [...mascotasData.perdidas, ...mascotasData.encontradas];
            const filteredPets = allPets.filter(pet =>
                pet.nombre.toLowerCase().includes(searchTerm) ||
                pet.raza.toLowerCase().includes(searchTerm) ||
                pet.ubicacion.toLowerCase().includes(searchTerm) ||
                pet.descripcion.toLowerCase().includes(searchTerm)
            );

            displaySearchResults(filteredPets);
            updateResultCount(filteredPets.length);
        });

        // Enter en búsqueda rápida
        document.getElementById('quickSearch').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                document.getElementById('quickSearchBtn').click();
            }
        });

        function updateResultCount(count) {
            const countElement = document.getElementById('resultCount');
            if (count === 0) {
                countElement.textContent = 'No se encontraron resultados';
            } else if (count === 1) {
                countElement.textContent = 'Se encontró 1 mascota';
            } else {
                countElement.textContent = `Se encontraron ${count} mascotas`;
            }
        }

        // Botón volver arriba
        window.onscroll = function () {
            const backToTopBtn = document.getElementById('backToTop');
            if (document.body.scrollTop > 200 || document.documentElement.scrollTop > 200) {
                backToTopBtn.style.display = 'block';
            } else {
                backToTopBtn.style.display = 'none';
            }
        };

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Cargar todas las mascotas al iniciar la página
        document.addEventListener('DOMContentLoaded', function() {
            displayAllPets();
        });
    </script>
</body>
</html>